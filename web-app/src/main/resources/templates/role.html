<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Bootstrap-->
    <link rel="stylesheet" href="../../resources/static/css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}">
    <script src="../../resources/static/js/bootstrap.bundle.min.js"
            th:src="@{/js/bootstrap.bundle.min.js}"></script>

    <!--Favicons-->
    <script src="https://kit.fontawesome.com/35e781efde.js"
            th:src="@{https://kit.fontawesome.com/35e781efde.js}" th:crossorigin="anonymous" ></script>
    <script src="https://kit.fontawesome.com/35e781efde.js" crossorigin="anonymous"></script>

    <title>Role</title>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="./projects.html" th:href="@{/projects}"><i class="fas fa-tasks"></i></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="./projects.html" th:href="@{/projects}">Projects</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./employees.html" th:href="@{/employees}">Employees</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./roles.html" th:href="@{/roles}">Roles</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<section class="container mt-4">
    <div class="row">

        <h2 th:text="${isNew} ? 'New role' : 'Edit role'">Edit role</h2>
        <hr />

        <div class="row">
            <form id="roleForm"
                  th:object="${role}"
                  action="roles.html"
                  th:action="@{${#httpServletRequest.servletPath}}"
                  th:method="@{post}">

                <input id="field_roleId"
                       type="hidden"
                       th:field="*{roleId}"/>

                <div class="mb-3">

                    <div>
                        <label for="roleNameInput"
                               class="form-label">Role Name:</label>
                        <input type="text"
                               class="form-control"
                               id="roleNameInput"
                               placeholder="Java Software Engineer"
                               th:field="*{roleName}">
                    </div>

                    <div class="mt-4 text-end">
                        <a href="./roles.html"
                           th:href="@{/roles}"
                           role="button"
                           class="btn btn-outline-primary">Back</a>
                        <button class="btn btn-outline-success"
                                type="submit">Submit</button>
                    </div>

                </div>

            </form>
        </div>
    </div>
</section>

<footer class="footer mt-auto py-2 bg-dark fixed-bottom">
    <div class="container">
        <span class="text-muted">&copy 2021</span>
    </div>
</footer>

</body>

<script src="../../resources/static/js/bootstrap-validate.js"
        th:src="@{/js/bootstrap-validate.js}"></script>
<script>
   bootstrapValidate('#roleNameInput','min:1:Enter at least 1 characters!');

    roleNameInput = document.getElementById('roleNameInput');
    form = document.getElementById('roleForm');

    form.addEventListener('submit', function (event) {
        if(roleNameInput.classList.contains('is-invalid') || roleNameInput.value == ""){
            event.preventDefault();
            event.stopPropagation();
        } else {
            document.forms['roleForm'].submit();
        }
    });
</script>
</html>